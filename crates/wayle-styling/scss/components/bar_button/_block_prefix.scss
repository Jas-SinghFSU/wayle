// BlockPrefix variant: Icon in colored container bleeding to button edge.
// button.toggle has label background, icon-container overlays with icon background.
// Both icon-container and label-container use vexpand+valign:Fill in Rust to match heights.

menubutton.bar-button.block-prefix {
    .bar-button-content {
        all: unset;
    }

    .icon-container {
        background-color: var(--bar-btn-icon-bg);
        border-top-left-radius: var(--bar-button-rounding-element);
        border-bottom-left-radius: var(--bar-button-rounding-element);
    }

    &.border-top .icon-container,
    &.border-left .icon-container,
    &.border-all .icon-container {
        border-top-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.border-bottom .icon-container,
    &.border-left .icon-container,
    &.border-all .icon-container {
        border-bottom-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    .icon-container image {
        color: var(--bar-btn-icon-color);
        margin: var(--bar-btn-icon-padding);
    }

    .label-container {
        margin: var(--bar-btn-label-padding);
    }

    .bar-button-label {
        color: var(--bar-btn-label-color);
    }

    &.vertical .icon-container {
        border-radius: 0;
        border-top-left-radius: var(--bar-button-rounding-element);
        border-top-right-radius: var(--bar-button-rounding-element);
    }

    &.vertical.border-top .icon-container,
    &.vertical.border-left .icon-container,
    &.vertical.border-all .icon-container {
        border-top-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.vertical.border-top .icon-container,
    &.vertical.border-right .icon-container,
    &.vertical.border-all .icon-container {
        border-top-right-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.icon-only .icon-container {
        border-radius: var(--bar-button-rounding-element);
    }

    &.icon-only.border-all .icon-container {
        border-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.icon-only.border-top .icon-container {
        border-top-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
        border-top-right-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.icon-only.border-bottom .icon-container {
        border-bottom-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
        border-bottom-right-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.icon-only.border-left .icon-container {
        border-top-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
        border-bottom-left-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    &.icon-only.border-right .icon-container {
        border-top-right-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
        border-bottom-right-radius: max(
            0px,
            calc(var(--bar-button-rounding-element) - var(--bar-btn-border-width, 0px) - 1px)
        );
    }

    > button.toggle:hover .icon-container {
        filter: brightness(1.1);
    }
}
