// Design tokens derived from palette variables.
// Palette vars ($palette-*) are injected by Rust at runtime.
// $global-scale affects dropdowns, dialogs, notifications.
// $bar-scale affects bar and bar button content independently.

$global-scale: 1;
$bar-scale: 1;

// Base values (unscaled) - single source of truth for the design scale.
// These are multiplied by $global-scale or $bar-scale to produce final tokens.

$base-space-xs: 0.25rem;
$base-space-sm: 0.5rem;
$base-space-md: 1rem;
$base-space-lg: 1.5rem;
$base-space-xl: 2rem;

$base-text-xs: 0.75rem;
$base-text-sm: 0.8125rem;
$base-text-base: 0.875rem;
$base-text-md: 0.9375rem;
$base-text-lg: 1.05rem;
$base-text-xl: 1.375rem;
$base-text-2xl: 1.75rem;
$base-text-3xl: 2.25rem;

$base-icon-xs: 0.75rem;
$base-icon-sm: 1rem;
$base-icon-md: 1.25rem;
$base-icon-lg: 1.6rem;
$base-icon-xl: 2rem;
$base-icon-2xl: 2.5rem;
$base-icon-3xl: 3rem;
$base-icon-4xl: 4rem;
$base-icon-6xl: 6rem;

$base-radius-sm: 0.375rem;
$base-radius-md: 0.625rem;
$base-radius-lg: 0.875rem;
$base-radius-xl: 1.125rem;

:root {
    // Palette
    --palette-bg: #{$palette-bg};
    --palette-surface: #{$palette-surface};
    --palette-elevated: #{$palette-elevated};
    --palette-fg: #{$palette-fg};
    --palette-fg-muted: #{$palette-fg-muted};
    --palette-primary: #{$palette-primary};
    --palette-red: #{$palette-red};
    --palette-yellow: #{$palette-yellow};
    --palette-green: #{$palette-green};
    --palette-blue: #{$palette-blue};

    // Backgrounds
    --bg-base: var(--palette-bg);
    --bg-surface: var(--palette-surface);
    --bg-elevated: var(--palette-elevated);
    --bg-overlay: color-mix(in srgb, var(--palette-elevated) 92%, var(--palette-fg));
    --bg-hover: color-mix(in srgb, var(--palette-elevated) 88%, var(--palette-fg));
    --bg-active: color-mix(in srgb, var(--palette-elevated) 82%, var(--palette-fg));
    --bg-selected: color-mix(in srgb, var(--accent) 15%, transparent);

    // Foregrounds
    --fg-default: var(--palette-fg);
    --fg-muted: var(--palette-fg-muted);
    --fg-subtle: color-mix(in srgb, var(--palette-fg) 50%, transparent);
    --fg-on-accent: var(--palette-bg);

    // Accent
    --accent: var(--palette-primary);
    --accent-subtle: color-mix(in srgb, var(--accent) 15%, transparent);
    --accent-hover: color-mix(in srgb, var(--accent) 80%, white);

    // Status
    --status-error: var(--palette-red);
    --status-warning: var(--palette-yellow);
    --status-success: var(--palette-green);
    --status-info: var(--palette-blue);

    --status-error-subtle: color-mix(in srgb, var(--status-error) 15%, transparent);
    --status-warning-subtle: color-mix(in srgb, var(--status-warning) 15%, transparent);
    --status-success-subtle: color-mix(in srgb, var(--status-success) 15%, transparent);
    --status-info-subtle: color-mix(in srgb, var(--status-info) 15%, transparent);

    --status-error-hover: color-mix(in srgb, var(--status-error) 85%, black);

    // Borders
    --border-subtle: color-mix(in srgb, var(--palette-fg) 12%, transparent);
    --border-default: color-mix(in srgb, var(--palette-elevated) 90%, var(--palette-fg));
    --border-strong: color-mix(in srgb, var(--palette-elevated) 82%, var(--palette-fg));
    --border-accent: var(--accent);
    --border-error: var(--status-error);

    // Overlays
    --scrim: rgba(0, 0, 0, 0.6);

    // Spacing (global scale)
    --space-xs: calc(#{$base-space-xs} * #{$global-scale});
    --space-sm: calc(#{$base-space-sm} * #{$global-scale});
    --space-md: calc(#{$base-space-md} * #{$global-scale});
    --space-lg: calc(#{$base-space-lg} * #{$global-scale});
    --space-xl: calc(#{$base-space-xl} * #{$global-scale});

    // Typography (global scale)
    --text-xs: calc(#{$base-text-xs} * #{$global-scale});
    --text-sm: calc(#{$base-text-sm} * #{$global-scale});
    --text-base: calc(#{$base-text-base} * #{$global-scale});
    --text-md: calc(#{$base-text-md} * #{$global-scale});
    --text-lg: calc(#{$base-text-lg} * #{$global-scale});
    --text-xl: calc(#{$base-text-xl} * #{$global-scale});
    --text-2xl: calc(#{$base-text-2xl} * #{$global-scale});
    --text-3xl: calc(#{$base-text-3xl} * #{$global-scale});

    --weight-normal: 400;
    --weight-medium: 500;
    --weight-semibold: 600;
    --weight-bold: 700;
    --weight-bold2: 800;
    --weight-bold3: 900;

    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;

    --tracking-tight: -0.025em;
    --tracking-normal: 0;
    --tracking-wide: 0.025em;
    --tracking-wider: 0.05em;

    --font-sans: #{$font-sans};
    --font-mono: #{$font-mono};

    // Border radius (global scale)
    --radius-none: 0;
    --radius-sm: calc(#{$base-radius-sm} * #{$global-scale});
    --radius-md: calc(#{$base-radius-md} * #{$global-scale});
    --radius-lg: calc(#{$base-radius-lg} * #{$global-scale});
    --radius-xl: calc(#{$base-radius-xl} * #{$global-scale});
    --radius-full: 9999px;

    // Semantic rounding tokens
    // User configures a single rounding preference (none/sm/md/lg).
    // Components use these semantic tokens instead of raw --radius-* values.
    //
    // --rounding-element: Interactive components (buttons, inputs, chips, badges).
    //                     Anything the user directly clicks or types into.
    //
    // --rounding-container: Wrapper components (cards, dialogs, dropdowns, panels).
    //                       Larger surfaces that contain other elements.
    //
    // For always-rounded shapes (toggles, sliders, spinners), use --radius-full directly.
    --rounding-element: #{$rounding-element};
    --rounding-container: #{$rounding-container};

    // Bar-specific semantic rounding (uses --bar-radius-* which scale with $bar-scale)
    --bar-rounding-element: #{$bar-rounding-element};
    --bar-rounding-container: #{$bar-rounding-container};

    // Shadows
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.5);
    --shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 12px 48px rgba(0, 0, 0, 0.5);

    // Focus
    --focus-ring-width: 2px;

    // Transitions
    --duration-super-fast: 75ms;
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;

    // Icons (global scale)
    --icon-xs: calc(#{$base-icon-xs} * #{$global-scale});
    --icon-sm: calc(#{$base-icon-sm} * #{$global-scale});
    --icon-md: calc(#{$base-icon-md} * #{$global-scale});
    --icon-lg: calc(#{$base-icon-lg} * #{$global-scale});
    --icon-xl: calc(#{$base-icon-xl} * #{$global-scale});
    --icon-2xl: calc(#{$base-icon-2xl} * #{$global-scale});
    --icon-3xl: calc(#{$base-icon-3xl} * #{$global-scale});
    --icon-4xl: calc(#{$base-icon-4xl} * #{$global-scale});
    --icon-6xl: calc(#{$base-icon-6xl} * #{$global-scale});

    // Bar button global properties
    // Per-button colors are set via inline CSS in the BarButton component.
    --bar-btn-opacity: 1;
    --bar-btn-border: none;

    // Bar-specific spacing (bar scale)
    --bar-space-xs: calc(#{$base-space-xs} * #{$bar-scale});
    --bar-space-sm: calc(#{$base-space-sm} * #{$bar-scale});
    --bar-space-md: calc(#{$base-space-md} * #{$bar-scale});
    --bar-space-lg: calc(#{$base-space-lg} * #{$bar-scale});
    --bar-space-xl: calc(#{$base-space-xl} * #{$bar-scale});

    // Bar-specific typography (bar scale)
    --bar-text-xs: calc(#{$base-text-xs} * #{$bar-scale});
    --bar-text-sm: calc(#{$base-text-sm} * #{$bar-scale});
    --bar-text-base: calc(#{$base-text-base} * #{$bar-scale});
    --bar-text-md: calc(#{$base-text-md} * #{$bar-scale});
    --bar-text-lg: calc(#{$base-text-lg} * #{$bar-scale});
    --bar-text-xl: calc(#{$base-text-xl} * #{$bar-scale});

    // Bar-specific icons (bar scale)
    --bar-icon-xs: calc(#{$base-icon-xs} * #{$bar-scale});
    --bar-icon-sm: calc(#{$base-icon-sm} * #{$bar-scale});
    --bar-icon-md: calc(#{$base-icon-md} * #{$bar-scale});
    --bar-icon-lg: calc(#{$base-icon-lg} * #{$bar-scale});
    --bar-icon-xl: calc(#{$base-icon-xl} * #{$bar-scale});

    // Bar-specific radius (bar scale)
    --bar-radius-sm: calc(#{$base-radius-sm} * #{$bar-scale});
    --bar-radius-md: calc(#{$base-radius-md} * #{$bar-scale});
    --bar-radius-lg: calc(#{$base-radius-lg} * #{$bar-scale});
    --bar-radius-xl: calc(#{$base-radius-xl} * #{$bar-scale});
}
